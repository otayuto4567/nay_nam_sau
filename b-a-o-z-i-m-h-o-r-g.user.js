// ==UserScript==
// @name         b-a-o-z-i-m-h-o-r-g
// @namespace    https://github.com/otayuto4567/nay_nam_sau/raw/main/b-a-o-z-i-m-h-o-r-g.user.js
// @version      2024.11.04
// @description  down b-a-o-z-i-m-h-o-r-g
// @author       You
// @match        https://m.godamh.com/chapter/*
// @match        https://baozimh.one/chapter/*
// @match        https://baozimh.org/manga/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=baozimh.org
// @grant        none
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.48/dist/zip.min.js
// @downloadURL  https://github.com/otayuto4567/nay_nam_sau/raw/main/b-a-o-z-i-m-h-o-r-g.user.js
// @updateURL    https://github.com/otayuto4567/nay_nam_sau/raw/main/b-a-o-z-i-m-h-o-r-g.meta.js
// ==/UserScript==

function a0_0x35ed(_0x37f9c9,_0x4b1556){const _0x49fe43=a0_0x49fe();return a0_0x35ed=function(_0x35edd9,_0x16d254){_0x35edd9=_0x35edd9-0x78;let _0x223a46=_0x49fe43[_0x35edd9];return _0x223a46;},a0_0x35ed(_0x37f9c9,_0x4b1556);}(function(_0x8e818f,_0x3c9a8e){const _0x125155=a0_0x35ed,_0x296c48=_0x8e818f();while(!![]){try{const _0x231593=parseInt(_0x125155(0xa6))/0x1+parseInt(_0x125155(0xa0))/0x2+parseInt(_0x125155(0xa5))/0x3+-parseInt(_0x125155(0xc3))/0x4+parseInt(_0x125155(0x79))/0x5*(parseInt(_0x125155(0x83))/0x6)+-parseInt(_0x125155(0x8b))/0x7*(-parseInt(_0x125155(0x9b))/0x8)+-parseInt(_0x125155(0xd5))/0x9*(parseInt(_0x125155(0x8c))/0xa);if(_0x231593===_0x3c9a8e)break;else _0x296c48['push'](_0x296c48['shift']());}catch(_0x35e397){_0x296c48['push'](_0x296c48['shift']());}}}(a0_0x49fe,0xc92cf));let downloading_current=0x0,downloading_total=0x0,image_blobs;function saveBlob(_0x1985e4,_0x258820){const _0x4624d5=a0_0x35ed,_0x16fbf2=window[_0x4624d5(0x81)][_0x4624d5(0xb9)](_0x1985e4),_0x2ff16f=document[_0x4624d5(0x82)]('a');_0x2ff16f['href']=_0x16fbf2,_0x2ff16f[_0x4624d5(0xcd)]=_0x258820,_0x2ff16f[_0x4624d5(0x84)][_0x4624d5(0x7e)]=_0x4624d5(0xd2),document[_0x4624d5(0xcc)][_0x4624d5(0xb8)](_0x2ff16f),_0x2ff16f[_0x4624d5(0x9f)](),_0x2ff16f['remove'](),window[_0x4624d5(0x81)][_0x4624d5(0x89)](_0x16fbf2),image_blobs=null;}function sleep(_0x2c2504){return new Promise(_0x441d01=>setTimeout(_0x441d01,_0x2c2504));}const download_not_encrypted=async(_0x857c7e,_0xeb4880)=>{const _0x5cbc63=a0_0x35ed,_0x939f72=await fetch(_0x857c7e),_0x9b8ff0=await _0x939f72[_0x5cbc63(0xce)](),_0x1b6d7f=new DataView(_0x9b8ff0),_0x323518=_0x1b6d7f[_0x5cbc63(0x90)](0x0,![])[_0x5cbc63(0xa3)](0x10),_0x4cdc87=(_0x1b6d7f[_0x5cbc63(0x90)](0x0,![])>>>0x8)[_0x5cbc63(0xa3)](0x10);let _0x33b331='.bin',_0x548961=_0x5cbc63(0xaf);if(_0x323518===_0x5cbc63(0xc5))_0x33b331=_0x5cbc63(0xd1),_0x548961=_0x5cbc63(0xd0);else{if(_0x323518===_0x5cbc63(0xc4))_0x33b331=_0x5cbc63(0xac),_0x548961=_0x5cbc63(0xc6);else _0x4cdc87==='ffd8ff'&&(_0x33b331=_0x5cbc63(0x8d),_0x548961=_0x5cbc63(0xa1));}let _0x3d224a=(''+(_0xeb4880+0x1))[_0x5cbc63(0xd3)](0x3,'0')+_0x33b331;const _0x2e3ec6=new Blob([_0x9b8ff0],{'type':_0x548961});image_blobs[_0x5cbc63(0xa2)]({'name':_0x3d224a,'blob':_0x2e3ec6}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();};function a0_0x49fe(){const _0x5c60cc=['getElementById','&c=','488oPKsqs','insertBefore','translate(-50%)','https://f40-1-4.g-mh.online','click','975172WrcRqj','image/jpeg','push','toString','forEach','2195559cTfvRd','1541870IfcbtG','map','name','#heartbeat','\x0a\x20\x20\x20\x20\x20\x20\x20\x20.status-num\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-family:\x20\x27Acme\x27,\x20sans-serif\x20!important;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x203rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#FD7377;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20-webkit-text-stroke:\x201px\x20#C62428;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x200.2rem\x20solid\x20#167975;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x201rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x200\x202rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#F9FDFD;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200.25rem\x200.4rem\x20#2E8B87;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x204rem;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','absolute','.png','length','div','application/octet-stream','https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/tai_icon.png','0.5rem','pointer','images','head','blob','addEventListener','url','appendChild','createObjectURL','left','center','3rem','https://fonts.googleapis.com/css2?family=Acme&display=swap','chapterContent','close','json','https://t40-1-4.g-mh.online','data','1469144Rmuuhh','89504e47','52494646','image/png','innerHTML','line','justifyContent','\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20','status-num','body','download','arrayBuffer','ZipWriter','image/webp','.webp','none','padStart','flex','88659GtzbWV','setAttribute','title','20iQmwyy','.zip','all','50vw','stylesheet','display','zIndex','application/zip','URL','createElement','1316010PgXQGc','style','/api/chapter/getinfo?m=','top','splice','textContent','revokeObjectURL','href','637nBBRMY','2490TPwFjM','.jpg','\x20/\x20','alignItems','getUint32','src','dataset','querySelector','add','className','info','.status-num','status'];a0_0x49fe=function(){return _0x5c60cc;};return a0_0x49fe();}function update_status(){const _0x4bcbcc=a0_0x35ed;document[_0x4bcbcc(0x93)](_0x4bcbcc(0x97))[_0x4bcbcc(0x84)][_0x4bcbcc(0x7e)]=_0x4bcbcc(0xd4),document[_0x4bcbcc(0x93)](_0x4bcbcc(0x97))[_0x4bcbcc(0x84)][_0x4bcbcc(0x8f)]='center',document[_0x4bcbcc(0x93)]('.status-num')[_0x4bcbcc(0xc7)]=downloading_current+_0x4bcbcc(0x8e)+downloading_total;}function create_status_box(){const _0x59b860=a0_0x35ed;let _0x546cef=document[_0x59b860(0x82)](_0x59b860(0xae));return _0x546cef[_0x59b860(0x95)]=_0x59b860(0xcb),_0x546cef[_0x59b860(0x88)]=downloading_current+_0x59b860(0x8e)+downloading_total,_0x546cef;}function create_download_icon(){const _0x2204d4=a0_0x35ed;let _0x5d20a8=document['createElement']('div'),_0x5d0f6b=document['createElement']('img');_0x5d0f6b[_0x2204d4(0x95)]='tai-ve',_0x5d0f6b['setAttribute'](_0x2204d4(0x91),_0x2204d4(0xb0)),_0x5d0f6b[_0x2204d4(0x84)]['width']=_0x2204d4(0xbc),_0x5d0f6b['style']['cursor']=_0x2204d4(0xb2),_0x5d20a8[_0x2204d4(0xb8)](_0x5d0f6b);let _0x37df45=document[_0x2204d4(0x82)]('link');_0x37df45['rel']=_0x2204d4(0x7d),_0x37df45[_0x2204d4(0x8a)]=_0x2204d4(0xbd),document['getElementsByTagName'](_0x2204d4(0xb4))[0x0]['appendChild'](_0x37df45);let _0x51c488=document['createElement']('div');_0x51c488[_0x2204d4(0x95)]=_0x2204d4(0x98),_0x51c488[_0x2204d4(0x84)][_0x2204d4(0x7e)]='flex',_0x51c488['style'][_0x2204d4(0xc9)]=_0x2204d4(0xbb),_0x51c488[_0x2204d4(0x84)][_0x2204d4(0x8f)]='center',_0x51c488[_0x2204d4(0x84)]['gap']='1.5rem',_0x51c488[_0x2204d4(0x84)]['position']=_0x2204d4(0xab),_0x51c488[_0x2204d4(0x84)][_0x2204d4(0x7f)]='10000',_0x51c488[_0x2204d4(0x84)][_0x2204d4(0x86)]=_0x2204d4(0xb1),_0x51c488[_0x2204d4(0x84)][_0x2204d4(0xba)]=_0x2204d4(0x7c),_0x51c488[_0x2204d4(0x84)]['transform']=_0x2204d4(0x9d);let _0x51c988=create_status_box();const _0x4e7ee0=document[_0x2204d4(0x82)](_0x2204d4(0x84));_0x4e7ee0[_0x2204d4(0x88)]=_0x2204d4(0xaa),document['head']['appendChild'](_0x4e7ee0),_0x51c488[_0x2204d4(0xb8)](_0x5d20a8),_0x51c488['appendChild'](_0x51c988);let _0x21dc62=document[_0x2204d4(0x93)]('body'),_0xc588de=_0x21dc62['firstChild'];return _0x21dc62[_0x2204d4(0x9c)](_0x51c488,_0xc588de),_0x51c488;}const throttlePromises=async(_0x1fb7d7,_0x57cbea)=>{const _0x5037dc=a0_0x35ed;while(_0x1fb7d7[_0x5037dc(0xad)]>0x0){await Promise[_0x5037dc(0x7b)](_0x1fb7d7[_0x5037dc(0x87)](0x0,_0x57cbea)[_0x5037dc(0xa7)](_0x52abe0=>_0x52abe0())),await sleep(0xc8);}},on_heartbeat_css=()=>{const _0x3758cf=a0_0x35ed;let _0xcf54d7=document[_0x3758cf(0x93)](_0x3758cf(0xa9));!_0xcf54d7&&(_0xcf54d7=document[_0x3758cf(0x82)](_0x3758cf(0x84)),_0xcf54d7[_0x3758cf(0xd6)]('id','heartbeat'),document[_0x3758cf(0xb4)][_0x3758cf(0xb8)](_0xcf54d7)),_0xcf54d7[_0x3758cf(0x88)]=_0x3758cf(0xca);},off_heartbeat_css=()=>{const _0xa32423=a0_0x35ed,_0x42abae=document[_0xa32423(0x93)]('#heartbeat');_0x42abae[_0xa32423(0x88)]='';};((async()=>{const _0x45dfd7=a0_0x35ed,_0x2266a2='https://api-get-v2.mgsearcher.com',_0x5ec231=document[_0x45dfd7(0x99)](_0x45dfd7(0xbe)),_0x2169bc=_0x5ec231[_0x45dfd7(0x92)]['ms'],_0x530991=_0x5ec231['dataset']['cs'],_0x2a4721=await fetch(_0x2266a2+_0x45dfd7(0x85)+_0x2169bc+_0x45dfd7(0x9a)+_0x530991),_0x4dec38=await _0x2a4721[_0x45dfd7(0xc0)](),_0x281da6=_0x4dec38[_0x45dfd7(0xc2)][_0x45dfd7(0x96)]['images'][_0x45dfd7(0xc8)]===0x2?_0x45dfd7(0x9e):_0x45dfd7(0xc1),_0x3d3cef=_0x4dec38[_0x45dfd7(0xc2)]['info']['images'][_0x45dfd7(0xb3)][_0x45dfd7(0xa7)](_0x63da7f=>_0x281da6+_0x63da7f[_0x45dfd7(0xb7)]);if(_0x3d3cef[_0x45dfd7(0xad)]>0x0){const _0x17e871=document[_0x45dfd7(0x93)](_0x45dfd7(0x78))?.[_0x45dfd7(0x88)]||'baozimh_org';downloading_total=_0x3d3cef['length'];const _0x555bf9=create_download_icon();_0x555bf9[_0x45dfd7(0xb6)](_0x45dfd7(0x9f),async()=>{const _0x24f16b=_0x45dfd7;on_heartbeat_css(),downloading_current=0x0,image_blobs=[];let _0x3e7f30;_0x3e7f30=_0x3d3cef[_0x24f16b(0xa7)]((_0x1e4eeb,_0x232424)=>()=>download_not_encrypted(_0x1e4eeb,_0x232424)),await throttlePromises(_0x3e7f30,0x2);const _0x264e7c=new zip['BlobWriter'](_0x24f16b(0x80)),_0x3700a0=new zip[(_0x24f16b(0xcf))](_0x264e7c);image_blobs[_0x24f16b(0xa4)](async _0x378983=>{const _0x1c08b6=_0x24f16b;await _0x3700a0[_0x1c08b6(0x94)](_0x378983[_0x1c08b6(0xa8)],new zip['BlobReader'](_0x378983[_0x1c08b6(0xb5)]));});const _0x356af2=await _0x3700a0[_0x24f16b(0xbf)]();saveBlob(_0x356af2,_0x17e871+_0x24f16b(0x7a));});}})());